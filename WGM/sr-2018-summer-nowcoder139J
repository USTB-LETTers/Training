
# LETTers Solution Report

- Date: 22 July 2018
- Author: WGM
- Problem ID: [nowcoder - 139J](https://www.nowcoder.com/acm/contest/139/J)

## Description modeling

将原数列复制成两倍并取中间的区间，即可转化为一般的“用树状数组求区间内不同数字的数量”。

## Points in solving

1.倍增，将不连续区间(左右两边)转化成连续区间
2.树状数组用法：将查询区间按区间右端升序排序，遍历每个数字，该数字在之前出现位置的贡献为0，在当前位置的贡献为1。因为不能计算重复的数字，而又按区间右端排序，所以只保留该数在当前位置之前最右边的一次出现。只要保证无重复，就可以前缀和记录出现了多少数字，就可以一边遍历数列一边求对应区间。

## Warnings

把之前出现位置的贡献变成0的时候，树状数组的更新应该是-1，而不是赋值0，因为树状数组记录的是和而不是值。
